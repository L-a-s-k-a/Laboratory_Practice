ARM GAS  C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"it_handlers.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/it_handlers.c"
  20              		.section	.text.SysTick_Handler,"ax",%progbits
  21              		.align	1
  22              		.global	SysTick_Handler
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	SysTick_Handler:
  28              	.LFB130:
   1:Core/Src/it_handlers.c **** #include "it_handlers.h"
   2:Core/Src/it_handlers.c **** #include <stdint.h>
   3:Core/Src/it_handlers.c **** 
   4:Core/Src/it_handlers.c **** // 来自 main.c
   5:Core/Src/it_handlers.c **** extern volatile uint32_t GlobalTickCount;
   6:Core/Src/it_handlers.c **** extern uint8_t  LedOn[6];
   7:Core/Src/it_handlers.c **** extern uint8_t  NumLedOn;
   8:Core/Src/it_handlers.c **** extern uint8_t  FreqIndex;
   9:Core/Src/it_handlers.c **** extern uint32_t BlinkPeriods[];
  10:Core/Src/it_handlers.c **** extern uint32_t CurrentPeriod;
  11:Core/Src/it_handlers.c **** 
  12:Core/Src/it_handlers.c **** typedef enum {
  13:Core/Src/it_handlers.c ****     MODE_BLINK=0,
  14:Core/Src/it_handlers.c ****     MODE_CONSTANT
  15:Core/Src/it_handlers.c **** } WorkMode_t;
  16:Core/Src/it_handlers.c **** extern volatile WorkMode_t CurrentMode;
  17:Core/Src/it_handlers.c **** 
  18:Core/Src/it_handlers.c **** // 按键标记
  19:Core/Src/it_handlers.c **** volatile uint8_t  BtnPressed = 0;
  20:Core/Src/it_handlers.c **** volatile uint32_t PressStart  = 0;
  21:Core/Src/it_handlers.c **** 
  22:Core/Src/it_handlers.c **** void SysTick_Handler(void)
  23:Core/Src/it_handlers.c **** {
  29              		.loc 1 23 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  24:Core/Src/it_handlers.c ****     GlobalTickCount++;
  34              		.loc 1 24 5 view .LVU1
ARM GAS  C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s 			page 2


  35              		.loc 1 24 20 is_stmt 0 view .LVU2
  36 0000 024A     		ldr	r2, .L2
  37 0002 1368     		ldr	r3, [r2]
  38 0004 0133     		adds	r3, r3, #1
  39 0006 1360     		str	r3, [r2]
  25:Core/Src/it_handlers.c **** }
  40              		.loc 1 25 1 view .LVU3
  41 0008 7047     		bx	lr
  42              	.L3:
  43 000a 00BF     		.align	2
  44              	.L2:
  45 000c 00000000 		.word	GlobalTickCount
  46              		.cfi_endproc
  47              	.LFE130:
  49              		.section	.text.EXTI15_10_IRQHandler,"ax",%progbits
  50              		.align	1
  51              		.global	EXTI15_10_IRQHandler
  52              		.syntax unified
  53              		.thumb
  54              		.thumb_func
  56              	EXTI15_10_IRQHandler:
  57              	.LFB131:
  26:Core/Src/it_handlers.c **** 
  27:Core/Src/it_handlers.c **** void EXTI15_10_IRQHandler(void)
  28:Core/Src/it_handlers.c **** {
  58              		.loc 1 28 1 is_stmt 1 view -0
  59              		.cfi_startproc
  60              		@ args = 0, pretend = 0, frame = 0
  61              		@ frame_needed = 0, uses_anonymous_args = 0
  62              		@ link register save eliminated.
  29:Core/Src/it_handlers.c ****     if(EXTI->PR & (1 << 13))
  63              		.loc 1 29 5 view .LVU5
  64              		.loc 1 29 12 is_stmt 0 view .LVU6
  65 0000 334B     		ldr	r3, .L13
  66 0002 5B69     		ldr	r3, [r3, #20]
  67              		.loc 1 29 7 view .LVU7
  68 0004 13F4005F 		tst	r3, #8192
  69 0008 60D0     		beq	.L4
  70              	.LBB2:
  30:Core/Src/it_handlers.c ****     {
  31:Core/Src/it_handlers.c ****         EXTI->PR |= (1 << 13);
  71              		.loc 1 31 9 is_stmt 1 view .LVU8
  72              		.loc 1 31 13 is_stmt 0 view .LVU9
  73 000a 314A     		ldr	r2, .L13
  74 000c 5369     		ldr	r3, [r2, #20]
  75              		.loc 1 31 18 view .LVU10
  76 000e 43F40053 		orr	r3, r3, #8192
  77 0012 5361     		str	r3, [r2, #20]
  32:Core/Src/it_handlers.c **** 
  33:Core/Src/it_handlers.c ****         uint8_t level = (GPIOC->IDR & (1<<13)) ? 1 : 0; 
  78              		.loc 1 33 9 is_stmt 1 view .LVU11
  79              		.loc 1 33 31 is_stmt 0 view .LVU12
  80 0014 2F4B     		ldr	r3, .L13+4
  81 0016 1A69     		ldr	r2, [r3, #16]
  82              		.loc 1 33 37 view .LVU13
  83 0018 02F40052 		and	r2, r2, #8192
  84              	.LVL0:
ARM GAS  C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s 			page 3


  34:Core/Src/it_handlers.c ****         static uint32_t lastIRQ=0;
  85              		.loc 1 34 9 is_stmt 1 view .LVU14
  35:Core/Src/it_handlers.c ****         if((GlobalTickCount - lastIRQ)<DELAY_BUTTON_FILTER)
  86              		.loc 1 35 9 view .LVU15
  87              		.loc 1 35 29 is_stmt 0 view .LVU16
  88 001c 2E4B     		ldr	r3, .L13+8
  89 001e 1B68     		ldr	r3, [r3]
  90 0020 2E49     		ldr	r1, .L13+12
  91 0022 0968     		ldr	r1, [r1]
  92 0024 5B1A     		subs	r3, r3, r1
  93              		.loc 1 35 11 view .LVU17
  94 0026 312B     		cmp	r3, #49
  95 0028 50D9     		bls	.L4
  36:Core/Src/it_handlers.c ****             return;
  37:Core/Src/it_handlers.c ****         lastIRQ=GlobalTickCount;
  96              		.loc 1 37 9 is_stmt 1 view .LVU18
  97              		.loc 1 37 16 is_stmt 0 view .LVU19
  98 002a 2B4B     		ldr	r3, .L13+8
  99 002c 1968     		ldr	r1, [r3]
 100 002e 2B4B     		ldr	r3, .L13+12
 101 0030 1960     		str	r1, [r3]
  38:Core/Src/it_handlers.c **** 
  39:Core/Src/it_handlers.c ****         if(level==1)
 102              		.loc 1 39 9 is_stmt 1 view .LVU20
 103              		.loc 1 39 11 is_stmt 0 view .LVU21
 104 0032 3AB1     		cbz	r2, .L6
  40:Core/Src/it_handlers.c ****         {
  41:Core/Src/it_handlers.c ****             // 按下
  42:Core/Src/it_handlers.c ****             BtnPressed=1;
 105              		.loc 1 42 13 is_stmt 1 view .LVU22
 106              		.loc 1 42 23 is_stmt 0 view .LVU23
 107 0034 2A4B     		ldr	r3, .L13+16
 108 0036 0122     		movs	r2, #1
 109              	.LVL1:
 110              		.loc 1 42 23 view .LVU24
 111 0038 1A70     		strb	r2, [r3]
  43:Core/Src/it_handlers.c ****             PressStart=GlobalTickCount;
 112              		.loc 1 43 13 is_stmt 1 view .LVU25
 113              		.loc 1 43 23 is_stmt 0 view .LVU26
 114 003a 274B     		ldr	r3, .L13+8
 115 003c 1A68     		ldr	r2, [r3]
 116 003e 294B     		ldr	r3, .L13+20
 117 0040 1A60     		str	r2, [r3]
 118 0042 7047     		bx	lr
 119              	.LVL2:
 120              	.L6:
 121              	.LBB3:
  44:Core/Src/it_handlers.c ****         }
  45:Core/Src/it_handlers.c ****         else
  46:Core/Src/it_handlers.c ****         {
  47:Core/Src/it_handlers.c ****             // 松开
  48:Core/Src/it_handlers.c ****             BtnPressed=0;
 122              		.loc 1 48 13 is_stmt 1 view .LVU27
 123              		.loc 1 48 23 is_stmt 0 view .LVU28
 124 0044 264B     		ldr	r3, .L13+16
 125 0046 0022     		movs	r2, #0
 126              	.LVL3:
ARM GAS  C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s 			page 4


 127              		.loc 1 48 23 view .LVU29
 128 0048 1A70     		strb	r2, [r3]
  49:Core/Src/it_handlers.c ****             uint32_t pressTime = GlobalTickCount - PressStart;
 129              		.loc 1 49 13 is_stmt 1 view .LVU30
 130              		.loc 1 49 50 is_stmt 0 view .LVU31
 131 004a 234B     		ldr	r3, .L13+8
 132 004c 1B68     		ldr	r3, [r3]
 133 004e 254A     		ldr	r2, .L13+20
 134 0050 1268     		ldr	r2, [r2]
 135              		.loc 1 49 22 view .LVU32
 136 0052 9B1A     		subs	r3, r3, r2
 137              	.LVL4:
  50:Core/Src/it_handlers.c **** 
  51:Core/Src/it_handlers.c ****             if(pressTime < 2000)
 138              		.loc 1 51 13 is_stmt 1 view .LVU33
 139              		.loc 1 51 15 is_stmt 0 view .LVU34
 140 0054 B3F5FA6F 		cmp	r3, #2000
 141 0058 16D2     		bcs	.L7
  52:Core/Src/it_handlers.c ****             {
  53:Core/Src/it_handlers.c ****                 // 短按
  54:Core/Src/it_handlers.c ****                 if(NumLedOn<6)
 142              		.loc 1 54 17 is_stmt 1 view .LVU35
 143              		.loc 1 54 28 is_stmt 0 view .LVU36
 144 005a 234B     		ldr	r3, .L13+24
 145              	.LVL5:
 146              		.loc 1 54 28 view .LVU37
 147 005c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 148              		.loc 1 54 19 view .LVU38
 149 005e 052B     		cmp	r3, #5
 150 0060 10D8     		bhi	.L12
  55:Core/Src/it_handlers.c ****                 {
  56:Core/Src/it_handlers.c ****                     LedOn[NumLedOn] = 1;
 151              		.loc 1 56 21 is_stmt 1 view .LVU39
 152              		.loc 1 56 37 is_stmt 0 view .LVU40
 153 0062 224A     		ldr	r2, .L13+28
 154 0064 0121     		movs	r1, #1
 155 0066 D154     		strb	r1, [r2, r3]
  57:Core/Src/it_handlers.c ****                     NumLedOn++;
 156              		.loc 1 57 21 is_stmt 1 view .LVU41
 157              		.loc 1 57 29 is_stmt 0 view .LVU42
 158 0068 0B44     		add	r3, r3, r1
 159 006a 1F4A     		ldr	r2, .L13+24
 160 006c 1370     		strb	r3, [r2]
 161 006e 7047     		bx	lr
 162              	.LVL6:
 163              	.L9:
 164              	.LBB4:
  58:Core/Src/it_handlers.c ****                 }
  59:Core/Src/it_handlers.c ****                 else
  60:Core/Src/it_handlers.c ****                 {
  61:Core/Src/it_handlers.c ****                     for(int i=0;i<6;i++){ LedOn[i]=0; }
 165              		.loc 1 61 43 is_stmt 1 discriminator 3 view .LVU43
 166              		.loc 1 61 51 is_stmt 0 discriminator 3 view .LVU44
 167 0070 1E4A     		ldr	r2, .L13+28
 168 0072 0021     		movs	r1, #0
 169 0074 D154     		strb	r1, [r2, r3]
 170              		.loc 1 61 38 is_stmt 1 discriminator 3 view .LVU45
ARM GAS  C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s 			page 5


 171 0076 0133     		adds	r3, r3, #1
 172              	.LVL7:
 173              	.L8:
 174              		.loc 1 61 34 discriminator 1 view .LVU46
 175 0078 052B     		cmp	r3, #5
 176 007a F9DD     		ble	.L9
 177              	.LBE4:
  62:Core/Src/it_handlers.c ****                     NumLedOn=0;
 178              		.loc 1 62 21 view .LVU47
 179              		.loc 1 62 29 is_stmt 0 view .LVU48
 180 007c 1A4B     		ldr	r3, .L13+24
 181              	.LVL8:
 182              		.loc 1 62 29 view .LVU49
 183 007e 0022     		movs	r2, #0
 184 0080 1A70     		strb	r2, [r3]
 185 0082 7047     		bx	lr
 186              	.LVL9:
 187              	.L12:
 188              	.LBB5:
  61:Core/Src/it_handlers.c ****                     NumLedOn=0;
 189              		.loc 1 61 29 view .LVU50
 190 0084 0023     		movs	r3, #0
 191 0086 F7E7     		b	.L8
 192              	.LVL10:
 193              	.L7:
  61:Core/Src/it_handlers.c ****                     NumLedOn=0;
 194              		.loc 1 61 29 view .LVU51
 195              	.LBE5:
  63:Core/Src/it_handlers.c ****                 }
  64:Core/Src/it_handlers.c ****             }
  65:Core/Src/it_handlers.c ****             else if(pressTime <4000)
 196              		.loc 1 65 18 is_stmt 1 view .LVU52
 197              		.loc 1 65 20 is_stmt 0 view .LVU53
 198 0088 B3F57A6F 		cmp	r3, #4000
 199 008c 14D2     		bcs	.L10
  66:Core/Src/it_handlers.c ****             {
  67:Core/Src/it_handlers.c ****                 // 2s 功能 => 改频率(闪烁模式下)
  68:Core/Src/it_handlers.c ****                 if(CurrentMode==MODE_BLINK)
 200              		.loc 1 68 17 is_stmt 1 view .LVU54
 201              		.loc 1 68 31 is_stmt 0 view .LVU55
 202 008e 184B     		ldr	r3, .L13+32
 203              	.LVL11:
 204              		.loc 1 68 31 view .LVU56
 205 0090 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 206              		.loc 1 68 19 view .LVU57
 207 0092 DBB9     		cbnz	r3, .L4
  69:Core/Src/it_handlers.c ****                 {
  70:Core/Src/it_handlers.c ****                     FreqIndex=(FreqIndex+1)%3;
 208              		.loc 1 70 21 is_stmt 1 view .LVU58
 209              		.loc 1 70 41 is_stmt 0 view .LVU59
 210 0094 1749     		ldr	r1, .L13+36
 211 0096 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 212 0098 0132     		adds	r2, r2, #1
 213              		.loc 1 70 44 view .LVU60
 214 009a A3F1AA33 		sub	r3, r3, #-1431655766
 215 009e 83FB0203 		smull	r0, r3, r3, r2
 216 00a2 03EB4303 		add	r3, r3, r3, lsl #1
ARM GAS  C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s 			page 6


 217 00a6 D31A     		subs	r3, r2, r3
 218              		.loc 1 70 30 view .LVU61
 219 00a8 0B70     		strb	r3, [r1]
  71:Core/Src/it_handlers.c ****                     CurrentPeriod=BlinkPeriods[FreqIndex];
 220              		.loc 1 71 21 is_stmt 1 view .LVU62
 221              		.loc 1 71 47 is_stmt 0 view .LVU63
 222 00aa DBB2     		uxtb	r3, r3
 223 00ac 124A     		ldr	r2, .L13+40
 224 00ae 52F82320 		ldr	r2, [r2, r3, lsl #2]
 225              		.loc 1 71 34 view .LVU64
 226 00b2 124B     		ldr	r3, .L13+44
 227 00b4 1A60     		str	r2, [r3]
 228 00b6 7047     		bx	lr
 229              	.LVL12:
 230              	.L10:
  72:Core/Src/it_handlers.c ****                 }
  73:Core/Src/it_handlers.c ****             }
  74:Core/Src/it_handlers.c ****             else
  75:Core/Src/it_handlers.c ****             {
  76:Core/Src/it_handlers.c ****                 // 4s => 切换闪烁/常亮
  77:Core/Src/it_handlers.c ****                 if(CurrentMode==MODE_BLINK)
 231              		.loc 1 77 17 is_stmt 1 view .LVU65
 232              		.loc 1 77 31 is_stmt 0 view .LVU66
 233 00b8 0D4B     		ldr	r3, .L13+32
 234              	.LVL13:
 235              		.loc 1 77 31 view .LVU67
 236 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 237              		.loc 1 77 19 view .LVU68
 238 00bc 1BB9     		cbnz	r3, .L11
  78:Core/Src/it_handlers.c ****                     CurrentMode=MODE_CONSTANT;
 239              		.loc 1 78 21 is_stmt 1 view .LVU69
 240              		.loc 1 78 32 is_stmt 0 view .LVU70
 241 00be 0C4B     		ldr	r3, .L13+32
 242 00c0 0122     		movs	r2, #1
 243 00c2 1A70     		strb	r2, [r3]
 244 00c4 7047     		bx	lr
 245              	.L11:
  79:Core/Src/it_handlers.c ****                 else
  80:Core/Src/it_handlers.c ****                     CurrentMode=MODE_BLINK;
 246              		.loc 1 80 21 is_stmt 1 view .LVU71
 247              		.loc 1 80 32 is_stmt 0 view .LVU72
 248 00c6 0A4B     		ldr	r3, .L13+32
 249 00c8 0022     		movs	r2, #0
 250 00ca 1A70     		strb	r2, [r3]
 251              	.LVL14:
 252              	.L4:
 253              		.loc 1 80 32 view .LVU73
 254              	.LBE3:
 255              	.LBE2:
  81:Core/Src/it_handlers.c ****             }
  82:Core/Src/it_handlers.c ****         }
  83:Core/Src/it_handlers.c ****     }
  84:Core/Src/it_handlers.c **** }
 256              		.loc 1 84 1 view .LVU74
 257 00cc 7047     		bx	lr
 258              	.L14:
 259 00ce 00BF     		.align	2
ARM GAS  C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s 			page 7


 260              	.L13:
 261 00d0 003C0140 		.word	1073822720
 262 00d4 00080240 		.word	1073874944
 263 00d8 00000000 		.word	GlobalTickCount
 264 00dc 00000000 		.word	lastIRQ.0
 265 00e0 00000000 		.word	BtnPressed
 266 00e4 00000000 		.word	PressStart
 267 00e8 00000000 		.word	NumLedOn
 268 00ec 00000000 		.word	LedOn
 269 00f0 00000000 		.word	CurrentMode
 270 00f4 00000000 		.word	FreqIndex
 271 00f8 00000000 		.word	BlinkPeriods
 272 00fc 00000000 		.word	CurrentPeriod
 273              		.cfi_endproc
 274              	.LFE131:
 276              		.section	.bss.lastIRQ.0,"aw",%nobits
 277              		.align	2
 280              	lastIRQ.0:
 281 0000 00000000 		.space	4
 282              		.global	PressStart
 283              		.section	.bss.PressStart,"aw",%nobits
 284              		.align	2
 287              	PressStart:
 288 0000 00000000 		.space	4
 289              		.global	BtnPressed
 290              		.section	.bss.BtnPressed,"aw",%nobits
 293              	BtnPressed:
 294 0000 00       		.space	1
 295              		.text
 296              	.Letext0:
 297              		.file 2 "D:/STM_32/gcc_download/SysGCC/arm-none-eabi/include/machine/_default_types.h"
 298              		.file 3 "D:/STM_32/gcc_download/SysGCC/arm-none-eabi/include/sys/_stdint.h"
 299              		.file 4 "CMSIS/Devices/stm32f429xx.h"
ARM GAS  C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 it_handlers.c
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:21     .text.SysTick_Handler:00000000 $t
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:27     .text.SysTick_Handler:00000000 SysTick_Handler
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:45     .text.SysTick_Handler:0000000c $d
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:50     .text.EXTI15_10_IRQHandler:00000000 $t
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:56     .text.EXTI15_10_IRQHandler:00000000 EXTI15_10_IRQHandler
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:261    .text.EXTI15_10_IRQHandler:000000d0 $d
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:280    .bss.lastIRQ.0:00000000 lastIRQ.0
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:293    .bss.BtnPressed:00000000 BtnPressed
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:287    .bss.PressStart:00000000 PressStart
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:277    .bss.lastIRQ.0:00000000 $d
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:284    .bss.PressStart:00000000 $d
C:\Users\mono\AppData\Local\Temp\ccaoKKGO.s:294    .bss.BtnPressed:00000000 $d

UNDEFINED SYMBOLS
GlobalTickCount
NumLedOn
LedOn
CurrentMode
FreqIndex
BlinkPeriods
CurrentPeriod
